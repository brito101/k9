<?php

namespace App\Observers;

use App\Models\Pentest;

class PentestObserver
{
    /**
     * Handle the Pentest "deleting" event.
     * Soft delete all related vulnerabilities when pentest is soft deleted.
     */
    public function deleting(Pentest $pentest): void
    {
        // Soft delete all vulnerabilities when pentest is soft deleted
        $pentest->vulnerabilities()->delete();
    }

    /**
     * Handle the Pentest "forceDeleting" event.
     * Force delete all related vulnerabilities when pentest is force deleted.
     */
    public function forceDeleting(Pentest $pentest): void
    {
        // Force delete all vulnerabilities when pentest is force deleted
        $pentest->vulnerabilities()->forceDelete();
    }
}
